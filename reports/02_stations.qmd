---
title: "Station summary"
format:
  html:
    code-fold: true
editor: visual
output-dir: "docs"
---

```{r}
#| label: setup
#| include: false

library(targets)
library(tidyverse)

tar_load(c("zoop", "zoop_long", "ant_sf"), store = here::here("_targets"))
source(here::here("R", "sp.R"))
source(here::here("R", "zoop.R"))
```

## Station maps

```{r}
#| label: station_maps

zoop_sf <- latlon_to_sf(zoop, 
                        coords = c("dec.longitude", "dec.latitude")) %>% 
  sf::st_transform(ant_proj())

map_lim <- sf::st_bbox(zoop_sf) %>% 
  project_bbox() %>% 
  expand_bbox(factor = 1.2)

ant_basemap(map_lim) +
  geom_sf(aes(color = time.of.day), zoop_sf) +
  facet_wrap(~ Year) +
  scale_x_continuous(breaks = c(-60, -55)) +
  scale_y_continuous(breaks = c(-63, -62, -61, -60)) +
  scale_color_manual(values = tod_pal()) +
  coord_ant(map_lim) +
  theme(legend.position = "bottom",
        legend.title = element_blank())
```
